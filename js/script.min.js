try{const e=27,t=document.documentElement,n=Array.from(t.querySelectorAll(".modal"));function findModalByName(e){return n.find(t=>t.classList.contains(e))}function showModal(e){t.classList.add("page_modal-visible"),e.classList.add("modal_visible");const n=e.querySelectorAll("[data-modal-closer]"),l={modalCloserClickHandler:()=>{},outModalClickHandler:()=>{},windowEscKeyDownHandler:()=>{}};function o(){t.removeEventListener("click",l.outModalClickHandler,!0),window.removeEventListener("keydown",l.windowEscKeyDownHandler),n.forEach(e=>{e.removeEventListener("click",l.modalCloserClickHandler)})}l.modalCloserClickHandler=createModalCloserClickHandler(e,o),l.outModalClickHandler=createOutModalClickHandler(e,o),l.windowEscKeyDownHandler=createWindowEscKeyDownHandler(e,o),n.forEach(e=>{e.addEventListener("click",l.modalCloserClickHandler)}),t.addEventListener("click",l.outModalClickHandler,!0),window.addEventListener("keydown",l.windowEscKeyDownHandler)}function hideModal(e){t.classList.remove("page_modal-visible"),e.classList.remove("modal_visible")}function createOutModalClickHandler(e,t){return function(n){n.target.closest(".modal")===e||n.target.dataset.modal||(hideModal(e),t())}}function createModalCloserClickHandler(e,t){return function(n){hideModal(e),t()}}function createWindowEscKeyDownHandler(t,n){return function(l){l.keyCode===e&&(hideModal(t),n())}}function handlePageClick(e){if(!e.target.dataset.modalOpener)return;e.preventDefault();const t=findModalByName(e.target.dataset.modalOpener);t?showModal(t):console.warn("Модальное окно не найдено")}t.addEventListener("click",handlePageClick,!0)}catch(e){console.warn(`Модуль Modal не удалось инициализировать: ${e}`)}try{let e="/catalog.html"===window.location.pathname?10:0;const t=document.documentElement,n=t.querySelector(".top-bar__link_cart");function addProductToCart(){n.innerHTML=n.innerHTML.replace(/Корзина: \d+/,`Корзина: ${++e}`)}function handlePageClick(t){t.target.classList.contains("product-card__buy-button")&&(addProductToCart(),e>0&&n.classList.add("top-bar__link_amaranth"))}t.addEventListener("click",handlePageClick)}catch(e){console.warn(`Модуль ProductCard не удалось инициализировать: ${e}`)}try{const e=Array.from(document.querySelectorAll(".services__tab-button")),t=document.querySelectorAll(".services__tab-content"),n=new Map(e.map((e,n)=>[t[n],e]));function showTabContent(e){hideTabContents(),e.classList.add("services__tab-content_visible"),n.get(e).classList.add("services__tab-button_checked")}function hideTabContent(e){e.classList.remove("services__tab-content_visible"),n.get(e).classList.remove("services__tab-button_checked")}function hideTabContents(){t.forEach(e=>hideTabContent(e))}function createServicesTabButtonClickHandler(e){return function(){showTabContent(e)}}n.forEach((e,t)=>e.addEventListener("click",createServicesTabButtonClickHandler(t)))}catch(e){console.warn(`Модуль Services не удалось инициализировать: ${e}`)}try{const e=3e3;let t,n=0;const l=document.querySelector(".slider"),o=Array.from(l.querySelectorAll(".button-radio_slider-switcher")),i=Array.from(l.querySelectorAll(".slider__slide")),r=l.querySelector(".slider__next-button"),d=l.querySelector(".slider__previous-button"),a=new Map(o.map((e,t)=>[i[t],e]));function startSlideShow(n){t=setInterval(()=>{showSliderSlide(getNextSliderSlide())},e)}function stopSlideShow(){clearInterval(t),t=void 0}function showSliderSlide(e){stopSlideShow(),hideSliderSlides(),n=i.indexOf(e),e.classList.add("slider__slide_visible"),a.get(e).classList.add("button-radio_checked"),startSlideShow(e)}function hideSliderSlide(e){e.classList.remove("slider__slide_visible"),a.get(e).classList.remove("button-radio_checked")}function hideSliderSlides(){i.forEach(e=>hideSliderSlide(e))}function getNextSliderSlide(e){const t=e?i.indexOf(e)+1:n+1;return i[t>i.length-1?0:t]}function getPreviousSliderSlide(){const e=n-1;return i[e<0?i.length-1:e]}function handleSliderNextButtonClick(){showSliderSlide(getNextSliderSlide())}function handleSliderPreviousButtonClick(){showSliderSlide(getPreviousSliderSlide())}function createButtonRadioSliderSwitcherHandler(e){return function(){showSliderSlide(e)}}a.forEach((e,t)=>e.addEventListener("click",createButtonRadioSliderSwitcherHandler(t))),r.addEventListener("click",handleSliderNextButtonClick),d.addEventListener("click",handleSliderPreviousButtonClick),startSlideShow()}catch(e){console.warn(`Модуль Slider не удалось инициализировать: ${e}`)}try{const e=600,t=document.querySelector(".modal-write-us"),n=t.querySelector(".modal-write-us__form");function handleModalWriteUsButtonClick(){n.checkValidity()||(t.classList.add("modal-write-us_shake"),setTimeout(()=>{t.classList.remove("modal-write-us_shake")},e))}t.querySelector(".modal-write-us__button").addEventListener("click",handleModalWriteUsButtonClick)}catch(e){console.warn(`Модуль ModalWriteUs не удалось инициализировать: ${e}`)}
